#include <stdio.h>
#include<stdlib.h>
struct bid_struct {
    int company_name;
    int num_coal_blocks;
    int bid_value;
    int *coal_blocks;
};
int compare(int a[],int b[],int m,int n){
    int i,j;
    for (i=0,j=0;i<m&&j<n;){

            if (a[i]==b[j])return 0;
            else if(a[i]>=b[j])j++;
            else i++;
    }
    return 1;
}
void main(){
    //for file input
    char filename[255];
    scanf("%s",filename);
    FILE *fp;
    fp=fopen(filename,"r");
    // file now stored in fp
    int time_limit,no_coal_blocks,no_bids,no_companies;
    fscanf(fp,"%d %d %d %d",&time_limit,&no_coal_blocks,&no_bids,&no_companies);
    //taking T,N,B,C
    time_limit*=60;
    //converting time to seconds
     int test;
    ////printf("%d %d %d %d\n",time_limit,no_coal_blocks,no_bids,no_companies);
    int bids_companies[no_companies],bids_start_companies[no_companies];
    int i=0,j=0,k=0,temp,bid_num;
    struct bid_struct bids[no_bids];
    //allocating memory to pointers in struct
    for(i=0;i<no_bids;i++){
        bids[i].coal_blocks=malloc(no_coal_blocks*sizeof(int));
    }
    bids_start_companies[0]=0;

    for(i=0;i<no_companies;i++){
        fscanf(fp,"%d %d",&temp,&bids_companies[i]);
        if(i+1<no_companies){
            bids_start_companies[i+1]=bids_start_companies[i]+bids_companies[i];
        }
        for(j=0;j<bids_companies[i];j++){
            bid_num=bids_start_companies[i]+j;
            fscanf(fp,"%d %d %d",&bids[bid_num].company_name,&bids[bid_num].num_coal_blocks,&bids[bid_num].bid_value);
            for(k=0;k<bids[bid_num].num_coal_blocks;k++){
                fscanf(fp,"%d",&bids[bid_num].coal_blocks[k]);
            }
        }
    }
    for (i=0;i<100;i++){
        printf("%d\n",bids[0].coal_blocks[i]);
    }
    // Creating a list of non overlapping bids
    int bid_value_per_block[no_bids], non_conflicting_bids[no_bids][no_bids];


    for (i=0;i<no_bids;i++){
        k = 0; // Index where the non conflicting bid has to be stored
        for (j=0;j<no_bids;j++){
            if(j<bids_start_companies[i]||(j+1<=no_bids&&j>=bids_start_companies[i+1])){
                test = compare(bids[i].coal_blocks,bids[j].coal_blocks,bids[i].num_coal_blocks,bids[j].num_coal_blocks);
                if (test !=0){
                    non_conflicting_bids[i][k] = j;
                    k++;
                }
            }
        }
        non_conflicting_bids[i][k] = -1;
    }
}
